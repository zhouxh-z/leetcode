## 节点类型
持久节点：写入后，无论客户端是否连接，数据节点都会存在；
临时节点：写入后，如果客户端断开，数据节点会删除；
有序节点：写入相同路径地址时，会生成有序的后缀数字；
ttl接口：可以设置超时时间，在超时后删除（不太准）

## 各种节点可以用于什么场景
持久节点：
    - 作为配置中心使用时，存储配置信息
    - 作为注册中心使用时，可以存储服务的元数据（IP、端口等）
临时节点：
    - 作为分布式锁
    - 服务发现
    - 心跳检测（判断是否存活）
有序节点：
    - 临时有序：分布式队列等
    - 持久有序：分布式唯一id

## zookeeper 节点监听机制
zk watch功能可以监听节点及其子节点的数据变化和状态

## zookeeper 集群选举机制 - zab
zk 在初始化 或者 leader接口崩溃时，会触发选举
1、每个存活zk都会初始化一张选票（epoch【选举轮次】 + zxid【事务id】 + myid【集群编号】）
2、然后将该选票发给所有成员节点，成员节点收到选票后，对比收到的选票和自己选票的大小（epoch【选举轮次】 + zxid【事务id】 + myid【集群编号】，按该顺序对比），保留选票更大的，然后将该选票再次广播出去
3、当某接口收到一半以上的相同选票时，会将该选票的节点设置为 leader节点，然后通知所有其他节点；

## zab 和 raft 和 Paxos
raft：
1、节点设置随机超时时间，如果节点在超时时间内未收到主节点的心跳；
2、节点属性 变更成 候选节点，投票轮次 + 1，把投票轮次发送给所有节点，其他节点写入该轮次，并返回确认消息；
3、超过半数以上节点变更成当前节点的投票轮次时，将当前节点变更成leader节点